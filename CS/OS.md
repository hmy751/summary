# 프로세스와 스레드

## 프로세스

프로세스는 실행 중인 프로그램을 말한다. 보조 기억장치에 있던 프로그램 데이터를 메모리에 적재하고 실행하는 순간 프로세스가 생성 된다.

보조 기억장치에서 있던 데이터를 메모리에 올려 실행 시키게 되면 프로세스가 형성된다.
프로세스는 Code, Head, Data, Stack으로 구성되어 있다.

### PCB(process control block)

PCB는 프로세스 제어 블록이라고도 불린다.
CPU는 한정돼있기 때문에 각 프로세스들은 차례대로 CPU를 이용한다. 운영체제는 프로세스의 실행 순서를 관리하고 CPU자원을 배분하는데 PCB가 사용된다.
PCB는 프로세스들 사이에서 특정 프로세스를 식별하는데 필요한 정보를 제공한다.

### 프로세스의 메모리 영역

프로세스는 코드 영역, 데이터 영역, 힙 영역, 스택 영역으로 나뉘어 저장된다.
여기서 코드 영역과 데이터 영역은 프로그램이 실행되는 동안 유지되며 변하지 않아 정적 할당 영역이라고 부른다.
힙 영역과 스택 영역은 프로세스 실행 과정에서 크기가 변할 수 있어 동적 할당 영역이라고 부른다.

- 코드 영역(code segment)
  코드 영역은 실행할 수 있는 코드, 명령어가 저장된다. CPU가 실행할 명령어가 담겨 있어 쓰기가 금지되어 있고 읽기 전용이다.

- 데이터 영역(data segment)
  데이터 영역은 일시적으로 쓰이는게 아니라 프로그램이 실행되는 동안 유지할 데이터가 저장되는 공간이다. 대표적으로 데이터 영역에는 전역 변수 등이 있다.

- 힙 영역(heap segment)
  프로그래머가 직접 할당할 수 있는 저장 공간이다. 개발 과정에서 힙 영역의 메모리 공간을 할당하여 사용하면 반환해야 한다. 반환하지 않으면 메모리내 계속 남아 낭비를 초래하며 이를 메모리 누수(memory leak)라고 한다.

- 스택 영역(stack segment)
  스택 영역은 데이터를 일시적으로 저장하는 공간이다. 잠깐 쓰이는 값들이 저장되는 공간이다. 함수의 실행이 끝나면 사라지는 매개 변수, 지역 변수등이 있다.

## 프로세스와 스레드

스레드는 프로세스의 실행 단위로, 프로세스 내에서 실행되는 여러 흐름의 단위를 의미한다.
하나의 프로세스에서 여러 스레드가 실행 되면서 한 번에 여러 일을 동시에 처리할 수 있게 해준다. 이러한 프로세스를 멀티 스레드 프로세스라고 한다.

스레드는 프로세스에서 실행에 필요한 레지스터, 스택과 같은 최소한의 정보만을 자체적으로 유지하고 나머지 코드, 데이터 ,힙 영역의 메모리들은 프로세스와 공유하며 사용한다.

### 멀티 프로세스와 멀티 스레드

멀티 프로세스는 여러 프로세스를 동시에 실행하는 것을 의미하며, 여러 스레드로 한 프로세스를 동시에 실행하는 것을 멀티 스레드라고 한다.

만약 동일한 작업을 멀티 프로세스, 멀티 스레드 방식으로 실행한다면 차이점은 프로세스 끼리는 자원을 공유하지 않고 스레드끼리는 자원을 공유한다는 점이다.

멀티 프로세스보다 멀티 스레드 방식이 메모리 관점에서는 더 효율적으로 사용할 수 있고 서로 협력과 통신에 유리하다.
하지만 자원을 공유하기 때문에 프로세스에 문제가 생기면 모든 스레드가 영향을 받는것이 단점이다.
